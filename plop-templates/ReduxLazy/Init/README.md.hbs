# Lazy Redux Store Setup

Generated: {{currentDate}}
Redux Version: {{reduxVersion}}

## ğŸ—ï¸ Architecture

This setup provides dynamic Redux reducer loading with code-splitting capabilities.

### Key Features
- **Code Splitting**: Each reducer loads in separate webpack chunks
- **Dynamic Loading**: Load reducers on-demand when features are accessed  
- **Preloading**: Option to preload critical reducers on app start
- **Dependencies**: Specify reducer dependencies for proper load order
- **Error Handling**: Retry logic and error states for failed loads

## ğŸ“ Structure

```
src/
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.ts          # Main store configuration
â”‚   â”œâ”€â”€ types.ts          # TypeScript definitions  
â”‚   â”œâ”€â”€ enhancers.ts      # Lazy loading enhancer system
â”‚   â””â”€â”€ reducerRegistry.ts # Reducer registry implementation
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ lazyRedux.ts      # Lazy loading utilities
â””â”€â”€ state/              # Generated lazy reducers
    â””â”€â”€ [feature]/
        â”œâ”€â”€ [feature].slice.ts
        â””â”€â”€ [feature].loader.ts
```

## ğŸš€ Usage

### Initialize Store (Already Done)
Store is configured and ready to use. Import in your app entry point:

\`\`\`typescript
import { Provider } from 'react-redux';
import { store } from './store';

function App() {
  return (
    <Provider store={store}>
      {/* Your app components */}
    </Provider>
  );
}
\`\`\`

### Generate Lazy Reducers

\`\`\`bash
# Basic reducer
pnpm plop lazy-redux-basic UserProfile

# Async reducer with thunks
pnpm plop lazy-redux-async Products

# Entity reducer with adapter
pnpm plop lazy-redux-entity Orders

# RTK Query API
pnpm plop lazy-redux-api UserApi
\`\`\`

### Load Reducers in Components

\`\`\`typescript
import { useEffect } from 'react';
import { store } from '../store';

function UserProfilePage() {
  useEffect(() => {
    // Load reducer when component mounts
    store.lazyLoader.loadReducer('userProfile');
  }, []);

  return <div>User Profile</div>;
}
\`\`\`

### Use Lazy Reducer HOC

\`\`\`typescript
import { withLazyReducer } from '../utils/lazyRedux';

const UserProfilePage = () => <div>User Profile</div>;

// Automatically loads 'userProfile' reducer before rendering
export default withLazyReducer(UserProfilePage, 'userProfile', manager);
\`\`\`

### Check Reducer Status

\`\`\`typescript
// Check if reducer is loaded
const isLoaded = store.lazyLoader.isReducerLoaded('userProfile');

// Get all loaded reducers
const loadedReducers = store.lazyLoader.getLoadedReducers();

// Eject reducer (remove from store)
store.lazyLoader.ejectReducer('userProfile');
\`\`\`

## âš™ï¸ Configuration

### Preload Reducers
Edit \`src/store/index.ts\` to preload critical reducers:

\`\`\`typescript
setupLazyLoading(store, lazyReducerConfigs, {
  enableCodeSplitting: true,
  preloadReducers: ['auth', 'ui'], // Add reducer keys here
  retryAttempts: 3,
  retryDelay: 1000,
});
\`\`\`

### Dependency Management
Specify dependencies in reducer configs:

\`\`\`typescript
export const ordersLazyConfig: LazyReducerConfig = {
  key: 'orders',
  reducerPath: './orders.slice',
  dependencies: ['auth', 'products'], // Load these first
  preload: false,
};
\`\`\`

## ğŸ”§ Advanced Usage

### Custom Loader
\`\`\`typescript
import { createDynamicImportLoader } from '../utils/lazyRedux';

const customLoader = createDynamicImportLoader(
  () => import('./custom-reducer')
);

manager.registerLoader('custom', customLoader);
\`\`\`

### Conditional Loading
\`\`\`typescript
// Load different reducers based on user role
if (user.isAdmin) {
  await store.lazyLoader.loadReducer('adminFeatures');
} else {
  await store.lazyLoader.loadReducer('userFeatures');
}
\`\`\`

## ğŸ“– Learn More

- [Redux Toolkit Documentation](https://redux-toolkit.js.org/)
- [Code Splitting Guide](https://webpack.js.org/guides/code-splitting/)
- [Dynamic Imports](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports)

## ğŸ› Troubleshooting

### Reducer not loading
1. Check console for error messages
2. Verify reducer path in loader config
3. Ensure dependencies are loaded first
4. Check network tab for failed chunk loads

### TypeScript errors
1. Run \`pnpm build\` to check compilation
2. Verify imports in generated files
3. Check TypeScript paths configuration

### Bundle size issues
1. Monitor chunk sizes with webpack-bundle-analyzer
2. Consider preloading only critical reducers
3. Use lazy loading for optional features only

---

**Generated by:** CyberCat React Plop Generators
**Template Version:** {{reduxVersion}}
{{#if includeExample}}**Includes:** Example reducer for testing{{/if}}